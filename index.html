<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Regular-express-and-parse-url by JesseZhao1990</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Regular-express-and-parse-url</h1>
      <h2 class="project-tagline">总结正则表达式和解析url</h2>
      <a href="https://github.com/JesseZhao1990/regular-express-and-parse-url" class="btn">View on GitHub</a>
      <a href="https://github.com/JesseZhao1990/regular-express-and-parse-url/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/JesseZhao1990/regular-express-and-parse-url/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="总结正则表达式和解析url" class="anchor" href="#%E6%80%BB%E7%BB%93%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%92%8C%E8%A7%A3%E6%9E%90url" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>总结正则表达式和解析url</h1>

<h2>
<a id="解析url" class="anchor" href="#%E8%A7%A3%E6%9E%90url" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>解析url</h2>

<h4>
<a id="将url的查询参数解析为字典对象" class="anchor" href="#%E5%B0%86url%E7%9A%84%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0%E8%A7%A3%E6%9E%90%E4%B8%BA%E5%AD%97%E5%85%B8%E5%AF%B9%E8%B1%A1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>将url的查询参数解析为字典对象？</h4>

<p>解决方案一般是拆字符串和用正则匹配。比价推荐的方法是正则匹配。因为url允许用户随意输入，如果用拆字符串的方法，有任何一个地方没考虑到容错，
就会导致程序出错。而正则就没有这个问题。它只匹配出正确的配对。非法的全部过滤掉。不过这里把两种方式都写一下。</p>

<p><strong>拆分字符串的方式</strong></p>

<pre><code>function getUrlParms(){
     var args=new Object(); 
     var query=location.search.substring(1);//获取查询串 
     var pairs=query.split("&amp;");    // 以&amp;分割

     for(var i=0;i&lt;pairs.length;i++){ 
         var pos=pairs[i].indexOf('=');         //查找name=value 
         if(pos==-1) continue;                  //如果没有找到就跳过 
         var argname=pairs[i].substring(0,pos); //提取name 
         var value=pairs[i].substring(pos+1);   //提取value 
         args[argname]=decodeURIComponent(value); //存为属性 
     }
     return args;
}
</code></pre>

<p><strong>正则的方式</strong></p>

<pre><code>function getQueryObject(url){
  var urlStr=url==null?window.location.href:url;    //校验传进来的url。如果为null 则重新从window对象中取得
  var search = urlStr.substring(urlStr.lastIndexOf("?")+1);  //获取到问号后边的部分
  var obj={};
  var reg = /([^?&amp;=]+)=([^?&amp;=]*)/g;
  search.replace(reg,function(rs,$1,$2){
      var name = decodeURIComponent($1);
      var val = decodeURIComponent($2);
      obj[name]=String(val);
      return rs;
  });
  return obj;
}
</code></pre>

<p>明天解释正则~~</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/JesseZhao1990/regular-express-and-parse-url">Regular-express-and-parse-url</a> is maintained by <a href="https://github.com/JesseZhao1990">JesseZhao1990</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
